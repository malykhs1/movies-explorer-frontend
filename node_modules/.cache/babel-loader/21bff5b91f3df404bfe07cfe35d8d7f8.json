{"ast":null,"code":"var _jsxFileName = \"/Users/aleksandrmalyh/dev/movies-explorer-frontend/src/components/App/App.js\",\n    _s = $RefreshSig$();\n\nimport \"./App.css\";\nimport React, { useState, useEffect } from \"react\";\nimport { Routes, Route, useNavigate, useHistory } from \"react-router-dom\";\nimport * as Auth from \"../../utils/auth\";\nimport { ProtectedRoute } from \"../ProtectedRoute/ProtectedRoute\";\nimport { api } from \"../../utils/api\";\nimport { Register } from \"../Registrer/Register\";\nimport { Login } from \"../Login/Login\";\nimport { ErrorNotFound } from \"../NotFoundError/NotFoundError\";\nimport { Main } from \"../Main/Main\";\nimport { Movies } from \"../Movies/Movies\";\nimport { Navigation } from \"../Navigation/Navigation\";\nimport { SavedMovies } from \"../SavedMovies/SavedMovies\";\nimport { Profile } from \"../Profile/Profile\";\nimport { CurrentUserContext } from \"../../context/CurrentUserContext\"; // import { isLoggedInContext } from \"../../context/IsLoggedInContext\";\n\nimport { InfoToolTip } from \"../Popup/Popup\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const App = () => {\n  _s();\n\n  let navigate = useNavigate();\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [currentUser, setCurrentUser] = useState({}); //поп-ап с подсказкой\n\n  const [isInfoToolTipOpened, setIsInfoToolTipOpened] = useState(false);\n  const [isSuccseed, setSuccseed] = useState(true);\n  const history = useHistory();\n  const location = history.location.pathname; //получаю данные пользователя\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    api.getUserInfo(token).then(userData => {\n      setLoggedIn(true);\n      setCurrentUser(userData);\n    }).catch(err => console.log(err));\n  }, []);\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n\n    if (loggedIn) {\n      api.getUserInfo(token).then(user => {\n        setLoggedIn(true);\n        setCurrentUser(user);\n        history.push(location);\n      }).catch(err => console.log(err));\n    }\n  }, [loggedIn]);\n  console.log(loggedIn);\n\n  const handleUpdateUser = _ref => {\n    let {\n      name,\n      email\n    } = _ref;\n    const token = localStorage.getItem('token');\n    api.setUserInfo(name, email, token).then(userData => {\n      setCurrentUser(userData);\n      closeAllPopups();\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const onRegister = _ref2 => {\n    let {\n      email,\n      password,\n      name\n    } = _ref2;\n    return Auth.register(email, password, name).then(res => {\n      if (res) {\n        setSuccseed(true);\n        setIsInfoToolTipOpened(true);\n        navigate(\"/movies\");\n      } else {\n        setSuccseed(false);\n        setIsInfoToolTipOpened(true);\n      }\n    });\n  };\n\n  const onLogin = _ref3 => {\n    let {\n      email,\n      password\n    } = _ref3;\n    return Auth.login(email, password).then(res => {\n      if (res) {\n        localStorage.setItem(\"token\", res.token);\n        setLoggedIn(true);\n        navigate(\"/movies\");\n      } else {\n        setLoggedIn(false);\n        setSuccseed(false);\n        setIsInfoToolTipOpened(true);\n      }\n    }).catch(err => console.log(err));\n  };\n\n  const onSignOut = () => {\n    localStorage.clear();\n    setLoggedIn(false);\n    debugger;\n    navigate(\"/\");\n  };\n\n  const closeAllPopups = () => {\n    setIsInfoToolTipOpened(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"root\",\n      children: [/*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(Main, {\n            loggedIn: loggedIn\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 38\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this), !loggedIn ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/sign-in\",\n            element: /*#__PURE__*/_jsxDEV(Login, {\n              loggedIn: loggedIn,\n              onLogin: onLogin\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/sign-up\",\n            element: /*#__PURE__*/_jsxDEV(Register, {\n              onRegister: onRegister\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true) : null, /*#__PURE__*/_jsxDEV(Route, {\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            loggedIn: loggedIn\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 29\n          }, this),\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/movies\",\n            element: /*#__PURE__*/_jsxDEV(Movies, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 46\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/saved-movies\",\n            element: /*#__PURE__*/_jsxDEV(SavedMovies, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 52\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/profile\",\n            element: /*#__PURE__*/_jsxDEV(Profile, {\n              onUpdateUser: handleUpdateUser,\n              onSignOut: onSignOut\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"nav-test\",\n            element: /*#__PURE__*/_jsxDEV(Navigation, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"*\",\n            element: /*#__PURE__*/_jsxDEV(ErrorNotFound, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 40\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(InfoToolTip, {\n        id: \"reg-pic\",\n        isOpened: isInfoToolTipOpened,\n        onClose: closeAllPopups,\n        isSuccseed: isSuccseed\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"K1O27kMiFy8gC71gK4eWJN9kaqw=\", false, function () {\n  return [useNavigate, useHistory];\n});\n\n_c = App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/aleksandrmalyh/dev/movies-explorer-frontend/src/components/App/App.js"],"names":["React","useState","useEffect","Routes","Route","useNavigate","useHistory","Auth","ProtectedRoute","api","Register","Login","ErrorNotFound","Main","Movies","Navigation","SavedMovies","Profile","CurrentUserContext","InfoToolTip","App","navigate","loggedIn","setLoggedIn","currentUser","setCurrentUser","isInfoToolTipOpened","setIsInfoToolTipOpened","isSuccseed","setSuccseed","history","location","pathname","token","localStorage","getItem","getUserInfo","then","userData","catch","err","console","log","user","push","handleUpdateUser","name","email","setUserInfo","closeAllPopups","error","onRegister","password","register","res","onLogin","login","setItem","onSignOut","clear"],"mappings":"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","sourcesContent":["import \"./App.css\";\nimport React, { useState, useEffect } from \"react\";\nimport { Routes, Route, useNavigate, useHistory } from \"react-router-dom\";\nimport * as Auth from \"../../utils/auth\";\nimport { ProtectedRoute } from \"../ProtectedRoute/ProtectedRoute\";\nimport { api } from \"../../utils/api\";\nimport { Register } from \"../Registrer/Register\";\nimport { Login } from \"../Login/Login\";\nimport { ErrorNotFound } from \"../NotFoundError/NotFoundError\";\nimport { Main } from \"../Main/Main\";\nimport { Movies } from \"../Movies/Movies\";\nimport { Navigation } from \"../Navigation/Navigation\";\nimport { SavedMovies } from \"../SavedMovies/SavedMovies\";\nimport { Profile } from \"../Profile/Profile\";\nimport { CurrentUserContext } from \"../../context/CurrentUserContext\";\n// import { isLoggedInContext } from \"../../context/IsLoggedInContext\";\nimport { InfoToolTip } from \"../Popup/Popup\";\n\nexport const App = () => {\n  let navigate = useNavigate();\n\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [currentUser, setCurrentUser] = useState({});\n\n  //поп-ап с подсказкой\n  const [isInfoToolTipOpened, setIsInfoToolTipOpened] = useState(false);\n  const [isSuccseed, setSuccseed] = useState(true);\n\n  const history = useHistory();\nconst location = history.location.pathname;\n  //получаю данные пользователя\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n\n      api\n        .getUserInfo(token)\n        .then((userData) => {\n          setLoggedIn(true);\n          setCurrentUser(userData);\n        })\n        .catch((err) => console.log(err));\n  }, []);\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (loggedIn) {\n      api.getUserInfo(token)\n        .then((user) => {\n          setLoggedIn(true)\n          setCurrentUser(user);\n          history.push(location) \n        })\n        .catch((err) => console.log(err));\n    }\n  }, [loggedIn])\n\n  console.log(loggedIn);\n\n  const handleUpdateUser = ({ name, email }) => {\n    const token = localStorage.getItem('token');\n    api\n      .setUserInfo(name, email, token)\n      .then((userData) => {\n        setCurrentUser(userData);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  const onRegister = ({ email, password, name }) => {\n    return Auth.register(email, password, name).then((res) => {\n      if (res) {\n        setSuccseed(true);\n        setIsInfoToolTipOpened(true);\n        navigate(\"/movies\");\n      } else {\n        setSuccseed(false);\n        setIsInfoToolTipOpened(true);\n      }\n    });\n  };\n\n  const onLogin = ({ email, password }) => {\n    return Auth.login(email, password)\n      .then((res) => {\n        if (res) {\n          localStorage.setItem(\"token\", res.token);\n          setLoggedIn(true);\n          navigate(\"/movies\");\n        } else {\n          setLoggedIn(false);\n          setSuccseed(false);\n          setIsInfoToolTipOpened(true);\n        }\n      })\n      .catch((err) => console.log(err));\n  };\n\n  const onSignOut = () => {\n    localStorage.clear();\n    setLoggedIn(false);\n    debugger\n    navigate(\"/\");\n  };\n\n  const closeAllPopups = () => {\n    setIsInfoToolTipOpened(false);\n  };\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      {/* <isLoggedInContext.Provider value={loggedIn}> */}\n        <div className=\"root\">\n          <Routes>\n            <Route path=\"/\" element={<Main loggedIn={loggedIn} />} />\n            {!loggedIn\n            ? (<>\n            <Route path=\"/sign-in\" element={<Login loggedIn={loggedIn} onLogin={onLogin} />} />\n            <Route path=\"/sign-up\" element={<Register onRegister={onRegister} />} />\n            </>)\n            : null\n            }\n            <Route element={<ProtectedRoute loggedIn={loggedIn}/>}>\n              <Route path=\"/movies\" element={<Movies />} />\n              <Route path=\"/saved-movies\" element={<SavedMovies />} />\n              <Route path=\"/profile\" element={<Profile onUpdateUser={handleUpdateUser} onSignOut={onSignOut} />}\n              />\n              <Route path=\"nav-test\" element={<Navigation />} />\n              <Route path=\"*\" element={<ErrorNotFound />} />\n            </Route>\n          </Routes>\n\n          <InfoToolTip\n            id=\"reg-pic\"\n            isOpened={isInfoToolTipOpened}\n            onClose={closeAllPopups}\n            isSuccseed={isSuccseed}\n          />\n        </div>\n      {/* </isLoggedInContext.Provider> */}\n    </CurrentUserContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}