{"ast":null,"code":"var _jsxFileName = \"/Users/aleksandrmalyh/dev/movies-explorer-frontend/src/components/App/App.js\",\n    _s = $RefreshSig$();\n\nimport \"./App.css\";\nimport React, { useState, useEffect } from \"react\";\nimport { Routes, Route, useNavigate } from \"react-router-dom\";\nimport * as Auth from \"../../utils/auth\";\nimport ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\nimport { api } from \"../../utils/api\";\nimport { Register } from \"../Registrer/Register\";\nimport { Login } from \"../Login/Login\";\nimport { ErrorNotFound } from \"../NotFoundError/NotFoundError\";\nimport { Main } from \"../Main/Main\";\nimport { Movies } from \"../Movies/Movies\";\nimport { SavedMovies } from \"../SavedMovies/SavedMovies\";\nimport { Profile } from \"../Profile/Profile\";\nimport { CurrentUserContext } from \"../../context/CurrentUserContext\";\nimport { isLoggedInContext } from \"../../context/IsLoggedInContext\";\nimport { InfoToolTip } from \"../Popup/Popup\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const App = () => {\n  _s();\n\n  let navigate = useNavigate();\n  const [loggedIn, setLoggedIn] = useState(null);\n  const [currentUser, setCurrentUser] = useState({}); //поп-ап с подсказкой\n\n  const [isInfoToolTipOpened, setIsInfoToolTipOpened] = useState(false);\n  const [isSuccseed, setSuccseed] = useState(true); //получаю данные пользователя\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    api.getUserInfo(token).then(() => {\n      setLoggedIn(true);\n    }).catch(err => console.log(err));\n  }, []);\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n\n    if (token) {\n      api.getUserInfo(token).then(user => {\n        setCurrentUser(user);\n        setLoggedIn(true);\n      }).catch(err => console.log(err));\n    }\n  }, [loggedIn]);\n\n  const handleUpdateUser = _ref => {\n    let {\n      name,\n      email\n    } = _ref;\n    const token = localStorage.getItem('token');\n    api.setUserInfo(name, email, token).then(userData => {\n      setCurrentUser(userData);\n      setSuccseed(true);\n      closeAllPopups();\n    }).catch(error => {\n      console.log(error);\n      setSuccseed(false);\n      setIsInfoToolTipOpened(true);\n    });\n  };\n\n  const onRegister = _ref2 => {\n    let {\n      email,\n      password,\n      name\n    } = _ref2;\n    return Auth.register(email, password, name).then(res => {\n      if (res) {\n        localStorage.setItem(\"token\", res.token); // setLoggedIn(true)\n        // navigate(\"/movies\");\n\n        setSuccseed(true);\n        setIsInfoToolTipOpened(true);\n        console.log(email);\n        onLogin(email, password);\n      } else {\n        setLoggedIn(false);\n        setSuccseed(false);\n        setIsInfoToolTipOpened(true);\n      }\n    });\n  };\n\n  const onLogin = _ref3 => {\n    let {\n      email,\n      password\n    } = _ref3;\n    return Auth.login(email, password).then(res => {\n      if (res) {\n        localStorage.setItem(\"token\", res.token);\n        setLoggedIn(true);\n        navigate(\"/movies\");\n      } else {\n        setLoggedIn(false);\n        setSuccseed(false);\n        setIsInfoToolTipOpened(true);\n      }\n    }).catch(err => console.log(err));\n  };\n\n  const onSignOut = () => {\n    localStorage.clear();\n    setLoggedIn(false);\n    navigate(\"/\");\n  };\n\n  const closeAllPopups = () => {\n    setIsInfoToolTipOpened(false);\n  };\n\n  console.log(loggedIn);\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n\n    if (token) {\n      setLoggedIn(true);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"root\",\n      children: [/*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(Main, {\n            loggedIn: loggedIn\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 38\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }, this), !loggedIn ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/sign-in\",\n            element: /*#__PURE__*/_jsxDEV(Login, {\n              loggedIn: loggedIn,\n              onLogin: onLogin\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/sign-up\",\n            element: /*#__PURE__*/_jsxDEV(Register, {\n              onRegister: onRegister\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true) : null, /*#__PURE__*/_jsxDEV(Route, {\n          element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n            loggedIn: loggedIn\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 29\n          }, this),\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/movies\",\n            element: /*#__PURE__*/_jsxDEV(Movies, {\n              onClose: closeAllPopups\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 46\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/saved-movies\",\n            element: /*#__PURE__*/_jsxDEV(SavedMovies, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 52\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/profile\",\n            element: /*#__PURE__*/_jsxDEV(Profile, {\n              onUpdateUser: handleUpdateUser,\n              onSignOut: onSignOut\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"*\",\n            element: /*#__PURE__*/_jsxDEV(ErrorNotFound, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 40\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(InfoToolTip, {\n        id: \"reg-pic\",\n        isOpened: isInfoToolTipOpened,\n        onClose: closeAllPopups,\n        isSuccseed: isSuccseed\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"fzehNa0gEYWv3yem3e1K1Rs9qks=\", false, function () {\n  return [useNavigate];\n});\n\n_c = App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/aleksandrmalyh/dev/movies-explorer-frontend/src/components/App/App.js"],"names":["React","useState","useEffect","Routes","Route","useNavigate","Auth","ProtectedRoute","api","Register","Login","ErrorNotFound","Main","Movies","SavedMovies","Profile","CurrentUserContext","isLoggedInContext","InfoToolTip","App","navigate","loggedIn","setLoggedIn","currentUser","setCurrentUser","isInfoToolTipOpened","setIsInfoToolTipOpened","isSuccseed","setSuccseed","token","localStorage","getItem","getUserInfo","then","catch","err","console","log","user","handleUpdateUser","name","email","setUserInfo","userData","closeAllPopups","error","onRegister","password","register","res","setItem","onLogin","login","onSignOut","clear"],"mappings":"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","sourcesContent":["import \"./App.css\";\nimport React, { useState, useEffect } from \"react\";\nimport { Routes, Route, useNavigate } from \"react-router-dom\";\nimport * as Auth from \"../../utils/auth\";\nimport  ProtectedRoute from \"../ProtectedRoute/ProtectedRoute\";\nimport { api } from \"../../utils/api\";\nimport { Register } from \"../Registrer/Register\";\nimport { Login } from \"../Login/Login\";\nimport { ErrorNotFound } from \"../NotFoundError/NotFoundError\";\nimport { Main } from \"../Main/Main\";\nimport { Movies } from \"../Movies/Movies\";\nimport { SavedMovies } from \"../SavedMovies/SavedMovies\";\nimport { Profile } from \"../Profile/Profile\";\nimport { CurrentUserContext } from \"../../context/CurrentUserContext\";\nimport { isLoggedInContext } from \"../../context/IsLoggedInContext\";\nimport { InfoToolTip } from \"../Popup/Popup\";\n\nexport const App = () => {\n  let navigate = useNavigate();\n\n  const [loggedIn, setLoggedIn] = useState(null);\n  const [currentUser, setCurrentUser] = useState({});\n\n  //поп-ап с подсказкой\n  const [isInfoToolTipOpened, setIsInfoToolTipOpened] = useState(false);\n  const [isSuccseed, setSuccseed] = useState(true);\n\n\n  \n  //получаю данные пользователя\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    api\n      .getUserInfo(token)\n      .then(() => {\n        setLoggedIn(true);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      api.getUserInfo(token)\n        .then((user) => {\n          setCurrentUser(user);\n          setLoggedIn(true);\n        })\n        .catch((err) => console.log(err));\n    }\n  }, [loggedIn])\n\n\n  const handleUpdateUser = ({ name, email }) => {\n    const token = localStorage.getItem('token');\n    api\n      .setUserInfo(name, email, token)\n      .then((userData) => {\n        setCurrentUser(userData);\n        setSuccseed(true);\n        closeAllPopups();\n      })\n      .catch((error) => {\n        console.log(error);\n        setSuccseed(false);\n        setIsInfoToolTipOpened(true);\n      });\n  };\n\n  const onRegister = ({ email, password, name }) => {\n    return Auth.register(email, password, name).\n    then((res) => {\n      if (res) {\n        localStorage.setItem(\"token\", res.token);\n        // setLoggedIn(true)\n        // navigate(\"/movies\");\n        setSuccseed(true);\n        setIsInfoToolTipOpened(true);\n        console.log(email);\n        onLogin(email, password)\n      } else {\n        setLoggedIn(false);\n        setSuccseed(false);\n        setIsInfoToolTipOpened(true);\n      }\n    });\n  };\n\n  const onLogin = ({ email, password }) => {\n    return Auth.login(email, password)\n      .then((res) => {\n        if (res) {\n          localStorage.setItem(\"token\", res.token);\n          setLoggedIn(true);\n          navigate(\"/movies\");\n        } else {\n          setLoggedIn(false);\n          setSuccseed(false);\n          setIsInfoToolTipOpened(true);\n        }\n      })\n      .catch((err) => console.log(err));\n  };\n\n  const onSignOut = () => {\n    localStorage.clear();\n    setLoggedIn(false);\n    navigate(\"/\");\n  };\n\n  const closeAllPopups = () => {\n    setIsInfoToolTipOpened(false);\n  };\n\n  console.log(loggedIn);\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      setLoggedIn(true)\n    }\n  }, []);\n  \n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      {/* <isLoggedInContext.Provider value={loggedIn}> */}\n        <div className=\"root\">\n          <Routes>\n            <Route path=\"/\" element={<Main loggedIn={loggedIn} />} />\n            {!loggedIn\n              ? (<>\n                <Route path=\"/sign-in\" element={<Login loggedIn={loggedIn} onLogin={onLogin} />} />\n                <Route path=\"/sign-up\" element={<Register onRegister={onRegister} />} />\n              </>)\n              : null\n            }\n            <Route element={<ProtectedRoute loggedIn={loggedIn} />}>\n              <Route path=\"/movies\" element={<Movies onClose={closeAllPopups} />} />\n              <Route path=\"/saved-movies\" element={<SavedMovies />} />\n              <Route path=\"/profile\" element={<Profile onUpdateUser={handleUpdateUser} onSignOut={onSignOut} />}/>\n              <Route path=\"*\" element={<ErrorNotFound />} />\n            </Route>\n          </Routes>\n\n          <InfoToolTip\n            id=\"reg-pic\"\n            isOpened={isInfoToolTipOpened}\n            onClose={closeAllPopups}\n            isSuccseed={isSuccseed}\n          />\n        </div>\n      {/* </isLoggedInContext.Provider> */}\n    </CurrentUserContext.Provider>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}