{"ast":null,"code":"import _objectSpread from\"/Users/aleksandrmalyh/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/aleksandrmalyh/dev/movies-explorer-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useLocation}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var MoviesCard=function MoviesCard(_ref){var film=_ref.film,savedMoviesToggle=_ref.savedMoviesToggle,filmsSaved=_ref.filmsSaved;var location=useLocation();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),fav=_useState2[0],setFav=_useState2[1];var filmPoster=\"https://api.nomoreparties.co/\".concat(film.image.url);useEffect(function(){if(location.pathname!=='/saved-movies'){var savedFilm=filmsSaved.filter(function(likeFilm){return likeFilm.movieId===film.id;});if(savedFilm.length>0){setFav(true);}else{setFav(false);}}},[filmsSaved]);var handleFavDelete=function handleFavDelete(){savedMoviesToggle(film,false);};var handleFavChange=function handleFavChange(){var newFav=!fav;var savedFilm=filmsSaved.filter(function(likeFilm){return likeFilm.movieId===film.id;});savedMoviesToggle(_objectSpread(_objectSpread({},film),{},{_id:savedFilm.length>0?savedFilm[0]._id:null}),newFav);};var getTime=function getTime(mins){var hours=Math.trunc(mins/60);var minutes=mins%60;return hours+\"\\u0447 \"+minutes+\"\\u043C\";};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card__info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card__text-info\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"card__title\",children:film.nameRU}),/*#__PURE__*/_jsx(\"p\",{className:\"card__duration\",children:getTime(film.duration)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card__like-container\",children:location.pathname==='/movies'?/*#__PURE__*/_jsx(\"button\",{className:\"card__like card__like\".concat(fav?'_active':'_unactive'),alt:\"\\u041A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0430 \\u0444\\u0438\\u043B\\u044C\\u043C\\u0430\",onClick:handleFavChange}):/*#__PURE__*/_jsx(\"button\",{className:\"card__like card__like_delete\",alt:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0444\\u0438\\u043B\\u044C\\u043C\",onClick:handleFavDelete})})]}),location.pathname==='/movies'?/*#__PURE__*/_jsx(\"a\",{target:\"_blank\",href:film.trailerLink||'https://www.youtube.com/',rel:\"noreferrer\",children:/*#__PURE__*/_jsx(\"img\",{className:\"card__poster\",src:filmPoster,alt:\"\\u041E\\u0431\\u043B\\u043E\\u0436\\u043A\\u0430 \\u0444\\u0438\\u043B\\u044C\\u043C\\u0430\"})}):/*#__PURE__*/_jsx(\"a\",{target:\"_blank\",href:film.trailer||'https://www.youtube.com/',rel:\"noreferrer\",children:/*#__PURE__*/_jsx(\"img\",{className:\"card__poster\",src:film.image,alt:\"\\u041E\\u0431\\u043B\\u043E\\u0436\\u043A\\u0430 \\u0444\\u0438\\u043B\\u044C\\u043C\\u0430\"})})]})});};","map":{"version":3,"sources":["/Users/aleksandrmalyh/dev/movies-explorer-frontend/src/components/MoviesCard/MoviesCard.js"],"names":["React","useEffect","useState","useLocation","MoviesCard","film","savedMoviesToggle","filmsSaved","location","fav","setFav","filmPoster","image","url","pathname","savedFilm","filter","likeFilm","movieId","id","length","handleFavDelete","handleFavChange","newFav","_id","getTime","mins","hours","Math","trunc","minutes","nameRU","duration","trailerLink","trailer"],"mappings":"+QAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,kBAA5B,C,6IAGA,MAAO,IAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,MAA6C,IAA1CC,CAAAA,IAA0C,MAA1CA,IAA0C,CAApCC,iBAAoC,MAApCA,iBAAoC,CAAjBC,UAAiB,MAAjBA,UAAiB,CACnE,GAAMC,CAAAA,QAAQ,CAAGL,WAAW,EAA5B,CACA,cAAsBD,QAAQ,CAAC,KAAD,CAA9B,wCAAOO,GAAP,eAAYC,MAAZ,eACA,GAAMC,CAAAA,UAAU,wCAAmCN,IAAI,CAACO,KAAL,CAAWC,GAA9C,CAAhB,CAEAZ,SAAS,CAAC,UAAM,CACZ,GAAIO,QAAQ,CAACM,QAAT,GAAsB,eAA1B,CAA2C,CACvC,GAAMC,CAAAA,SAAS,CAAGR,UAAU,CAACS,MAAX,CAAkB,SAACC,QAAD,CAAc,CAC9C,MAAOA,CAAAA,QAAQ,CAACC,OAAT,GAAqBb,IAAI,CAACc,EAAjC,CACH,CAFiB,CAAlB,CAIA,GAAIJ,SAAS,CAACK,MAAV,CAAmB,CAAvB,CAA0B,CACtBV,MAAM,CAAC,IAAD,CAAN,CACH,CAFD,IAEO,CACHA,MAAM,CAAC,KAAD,CAAN,CACH,CACJ,CACJ,CAZQ,CAYN,CAACH,UAAD,CAZM,CAAT,CAgBA,GAAMc,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC1Bf,iBAAiB,CAACD,IAAD,CAAO,KAAP,CAAjB,CACA,CAFJ,CAIA,GAAMiB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC1B,GAAMC,CAAAA,MAAM,CAAG,CAACd,GAAhB,CACA,GAAMM,CAAAA,SAAS,CAAGR,UAAU,CAACS,MAAX,CAAkB,SAACC,QAAD,CAAc,CAC9C,MAAOA,CAAAA,QAAQ,CAACC,OAAT,GAAqBb,IAAI,CAACc,EAAjC,CACH,CAFiB,CAAlB,CAGAb,iBAAiB,gCAAMD,IAAN,MAAYmB,GAAG,CAAET,SAAS,CAACK,MAAV,CAAmB,CAAnB,CAAuBL,SAAS,CAAC,CAAD,CAAT,CAAaS,GAApC,CAA0C,IAA3D,GAAmED,MAAnE,CAAjB,CACA,CANJ,CAQG,GAAME,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,IAAD,CAAU,CACzB,GAAIC,CAAAA,KAAK,CAAGC,IAAI,CAACC,KAAL,CAAWH,IAAI,CAAG,EAAlB,CAAZ,CACA,GAAII,CAAAA,OAAO,CAAGJ,IAAI,CAAG,EAArB,CACA,MAAOC,CAAAA,KAAK,UAAL,CAAeG,OAAf,SAAP,CACA,CAJD,CAOH,mBACI,sCACI,aAAK,SAAS,CAAC,MAAf,wBACI,aAAK,SAAS,CAAC,YAAf,wBACI,aAAK,SAAS,CAAC,iBAAf,wBACI,WAAI,SAAS,CAAC,aAAd,UAA6BzB,IAAI,CAAC0B,MAAlC,EADJ,cAEI,UAAG,SAAS,CAAC,gBAAb,UAA+BN,OAAO,CAACpB,IAAI,CAAC2B,QAAN,CAAtC,EAFJ,GADJ,cAKI,YAAK,SAAS,CAAC,sBAAf,UACKxB,QAAQ,CAACM,QAAT,GAAsB,SAAtB,cACM,eAAQ,SAAS,gCAA0BL,GAAG,CAAG,SAAH,CAAe,WAA5C,CAAjB,CAA4E,GAAG,CAAC,uFAAhF,CAAkG,OAAO,CAAEa,eAA3G,EADN,cAEM,eAAQ,SAAS,CAAC,8BAAlB,CAAiD,GAAG,CAAC,2EAArD,CAAqE,OAAO,CAAED,eAA9E,EAHX,EALJ,GADJ,CAaKb,QAAQ,CAACM,QAAT,GAAsB,SAAtB,cACM,UAAG,MAAM,CAAC,QAAV,CAAmB,IAAI,CAAET,IAAI,CAAC4B,WAAL,EAAoB,0BAA7C,CAAyE,GAAG,CAAC,YAA7E,uBAA0F,YAAK,SAAS,CAAC,cAAf,CAA8B,GAAG,CAAEtB,UAAnC,CAA+C,GAAG,CAAC,iFAAnD,EAA1F,EADN,cAEM,UAAG,MAAM,CAAC,QAAV,CAAmB,IAAI,CAAEN,IAAI,CAAC6B,OAAL,EAAgB,0BAAzC,CAAqE,GAAG,CAAC,YAAzE,uBAAsF,YAAK,SAAS,CAAC,cAAf,CAA8B,GAAG,CAAE7B,IAAI,CAACO,KAAxC,CAA+C,GAAG,CAAC,iFAAnD,EAAtF,EAfX,GADJ,EADJ,CAsBH,CA9DM","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useLocation } from \"react-router-dom\";\n\n\nexport const MoviesCard = ({ film, savedMoviesToggle, filmsSaved }) => {  \n    const location = useLocation();\n    const [fav, setFav] = useState(false);\n    const filmPoster = `https://api.nomoreparties.co/${film.image.url}`;\n\n    useEffect(() => {\n        if (location.pathname !== '/saved-movies') {\n            const savedFilm = filmsSaved.filter((likeFilm) => {\n                return likeFilm.movieId === film.id;\n            });\n\n            if (savedFilm.length > 0) {\n                setFav(true);\n            } else {\n                setFav(false);\n            }\n        }\n    }, [filmsSaved]);\n\n   \n\n    const handleFavDelete = () => {\n        savedMoviesToggle(film, false)\n       }\n      \n    const handleFavChange = () => {\n        const newFav = !fav;\n        const savedFilm = filmsSaved.filter((likeFilm) => {\n            return likeFilm.movieId === film.id;\n        })\n        savedMoviesToggle({ ...film, _id: savedFilm.length > 0 ? savedFilm[0]._id : null }, newFav);\n       }\n\n       const getTime = (mins) => {\n        let hours = Math.trunc(mins / 60);\n        let minutes = mins % 60;\n        return hours + `ч ` + minutes + `м`;\n       }\n\n  \n    return (\n        <>\n            <div className=\"card\">\n                <div className=\"card__info\">\n                    <div className=\"card__text-info\">\n                        <h2 className=\"card__title\">{film.nameRU}</h2>\n                        <p className=\"card__duration\">{getTime(film.duration)}</p>\n                    </div>\n                    <div className=\"card__like-container\">\n                        {location.pathname === '/movies'\n                            ? (<button className={`card__like card__like${fav ? '_active' : '_unactive'}`} alt=\"Картинка фильма\" onClick={handleFavChange}></button>)\n                            : (<button className=\"card__like card__like_delete\" alt=\"Удалить фильм\" onClick={handleFavDelete}></button>)\n                        }\n                    </div>\n                </div>\n                {location.pathname === '/movies'\n                    ? (<a target=\"_blank\" href={film.trailerLink || 'https://www.youtube.com/'} rel=\"noreferrer\"><img className=\"card__poster\" src={filmPoster} alt=\"Обложка фильма\" /></a>)\n                    : (<a target=\"_blank\" href={film.trailer || 'https://www.youtube.com/'} rel=\"noreferrer\"><img className=\"card__poster\" src={film.image} alt=\"Обложка фильма\" /></a>)\n                }\n            </div>\n        </>\n    );\n};"]},"metadata":{},"sourceType":"module"}